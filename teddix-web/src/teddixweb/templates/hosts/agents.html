{% extends 'base.html' %}

{% block title %}Teddix Agents{% endblock %}

{% block content %}
      {% if error %} 
      <div class="alert alert-danger fade in">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <h4>Oh snap! Error occured!</h4>
        <p>{{ error }}</p>
        <button type="button" class="btn btn-danger" data-dismiss="alert" aria-hidden="true">Close</button>
      </div>
      {% endif %}
      {% if info %} 
      <div class="alert alert-success fade in">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <h4>Success</h4>
        <p>{{ info }}</p>
        <button type="button" class="btn btn-success" data-dismiss="alert" aria-hidden="true">Close</button>
      </div>
      {% endif %}

      <h1 class="page-header">Agents</h1>
      <p class="lead">List available agents</p>
      <p>
      <form class="form-inline"  method="get" action="{% url teddixweb.views.agents_view %}">
        {% csrf_token %}
        <div class="row">
          <div class="col-md-10">
            <div class="form-group" role="form">
              <input type="search" class="form-control" name="search" value="{{ search }}" placeholder="Agent Name">
            </div>
            <button type="submit" class="btn btn-primary">Search</button>
          </div>
          <div class="col-md-2">
            <a href="/hosts/agents/?action=new" class="btn btn-success">New Agent</a>
          </div>
        </div>
      </form>
      </p>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>#</th>
            <th>Agent Name</th>
            <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for agent in agent_list %}
        <tr>
          <td>{{ agent.id }}</td>
          <td>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=show" data-toggle="popover" data-content="Show agent details">{{ agent.name }}</a>
          </td>
          <td>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=show" data-toggle="popover" data-content="Show agent details"><img src="/static/actions/info.png" alt="Show"/></a>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=edit" data-toggle="popover" data-content="Edit agent"><img src="/static/actions/edit.png" alt="Edit"/></a>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=schedule" data-toggle="popover" data-content="Schedule new job"><img src="/static/actions/schedule.png" alt="Schedule"/></a>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=test" data-toggle="popover" data-content="Connection test"><img src="/static/actions/network.png" alt="Test"/></a>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=restart" data-toggle="popover" data-content="Restart agent"><img src="/static/actions/restart.png" alt="Restart"/></a>
            <a href="/hosts/agents/?agent_id={{ agent.id }}&action=delete" data-toggle="popover" data-content="Remove agent"><img src="/static/actions/delete.png" alt="Delete"/></a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

{% endblock %}

